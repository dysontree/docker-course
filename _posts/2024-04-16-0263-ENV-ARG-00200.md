---
layout: article
---
```
app.py
```

Взгляни на этот участок кода. Здесь создается две переменные `rocket_env` и `rocket`. Одна инициализируется через переменную окружения, вторая выбирает размер случайно. Далее одна из этих переменных направляется на веб-сервер, который демонстрирует страницу с ракетой. Таким образом, мы можем изменить поведение приложения, не изменяя его код. В случае контейнерной версии, нам просто нужно определить, что мы хотим увидеть через переменную окружения для запущенного контейнера.

Мы делали это следующим образом:

```
docker container run -P --env ROCKET_SIZE=big rotorocloud/simple-webapp-rockets
```

Теперь этот экземпляр приложения в контейнере будет всегда показывать большую ракету. Параметр `--env` передал переменную окружения, и контейнер был создан с этим параметром. Обычно такие флаги используют для передачи небольшого количества переменных. Для длинных списков есть опция `--env-file`.

А что, если нам требуется создать приложение, которое бы показывало большую ракету сразу из образа, без необходимости указания ключа `--env`, `-e` или `--env-file` при запуске? 

Ну, мы можем зафиксировать такие переменные окружения на этапе сборки.

```
FROM python:3.8-alpine

RUN pip install flask

COPY . /opt/

EXPOSE 8080

WORKDIR /opt

ENTRYPOINT ["python3", "app.py"]

ENV ROCKET_SIZE=big
```

Я добавлю в Dockerfile инструкцию `ENV ROCKET_SIZE=big`, соберу образ и присвою ему тег `big`. Теперь запущу из него контейнер без всяких ключей для переменных среды.

```
docker image build --tag rotorocloud/simple-webapp-rockets:big .
```

```
docker container run -P -d rotorocloud/simple-webapp-rockets:big
```

В браузере мы можем видеть, что размер ракеты большой, хотя мы дополнительно ничего и не указывали. При запуске мы можем свободно переопределить `ROCKET_SIZE` при помощи ключа `-e`, и это позволит настроить нужный нам размер ракеты для нового контейнера.
Я сделаю `exec` в контейнер и запущу команду `env`. Как видишь, переменная окружения `ROCKET_SIZE` в значении `big`, и именно из-за этого наше приложение работает нужным образом.

```
docker container exec 1921f76c8415 env | grep -i rocket
```
