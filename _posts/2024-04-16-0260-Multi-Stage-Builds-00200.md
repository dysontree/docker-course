---
layout: article
---
Мы начнем с простого приложения. Это несложное веб-приложение, оно лежит у меня в S3, а будучи загруженным оттуда, аутентифицирует пользователя через Google-аккаунт, собирает информацию из разных API и формирует дэшборд.
Это все написано на node-js, но фактически оно исполняется только на стороне браузера. Нам не обязательно хостить это приложение в облаке. Мы можем запустить его сами под управлением какого-то веб-сервера, вроде nginx или apache.

Вот здесь структура приложения. Сейчас нам не стоит беспокоится о коде, и о том, что именно делает приложение.

Ок, если я простой разработчик, то приложение для меня - это набор файлов, с которыми я работаю. Я правлю их, добавляю в них функции из пакетов и особенно не забочусь, как и где эти кусочки живут на моём лэптопе или сервере разработки. Когда мне потребуется контейнеризировать приложение, я постараюсь привести свои файлы и зависимости в надлежащий вид. В этом мне поможет менеджер пакетов Node JS - `YARN`. Он соберет из моего кода приложение в виде распространяемого пакета. Это происходит при запуске команды `yarm build`. Команда создаст каталог `dist` и соответствующим образом разложит нужные файлы по нужным местам в этом каталоге. И вот содержимое этого каталога это всё, что нужно для того, чтобы нам запустить моё приложение.

```
yarn build
```

Полученный dist-пакет нам удобно будет использовать для создания контейнера. Но сначала нам нужен план сборки образа, т.е. Dockerfile. Итак, мы разрабатываем Dockerfile для контейнеризации приложения.

Мы решили использовать `nginx` для обслуживания запросов, поэтому в качестве образа, над которым будем собирать свой, будет базовый образ `nginx` с Docker Hub. Итак, я пишу `FROM nginx`, т.е. указываю, что использую `nginx` в качестве родительского образа. Далее копирую каталог `dist` в сервисный каталог Nginx. В конце команда для запуска сервера `nginx -g daemon off`.

```
FROM nginx

COPY dist /usr/share/nginx/html

CMD [ "nginx", "-g", "daemon off;" ]
```

Теперь, когда все готово, мы запускаем `docker build`, т.е. команду, которая создаёт образ для нашего приложения. Это всё. Мы контейнеризировали наше приложение, и теперь его можно будет запускать где угодно.

docker image build -t my-dashboard .
