---
layout: article
---
```
docker image ls
```

Когда мы пытаемся удалить образ и посылаем команду, Docker делает две вещи. Он удаляет soft link на образ, т.е. то, что позволяет нам отличать один образ от другого. Это называется тегом образа, и мы говорили об этом ранее в курсе. Далее Docker удаляет сам образ, который фактически представляет собой набор слоёв. Вот на этом этапе освобождается место на диске.

В этом примере у нас есть образ httpd с двумя тегами: c тегом `latest` и c нашим собственным тегом `v1`. Они видятся как два образа, но имеют один идентификатор. Образ с ID, заканчивающимся на `ff60` и размером 167МБ физически является одним набором слоев, но с двумя разными тегами. Таким образом, удаление первого образа командой `image rm` не будет удалять физические слои на диске, поскольку они используются другим тегом, который `latest`. Так происходит, когда у нас есть более одного тега, связанного с образом.

```
docker image rm httpd:v1
```

Наш Docker достаточно умен, чтобы не удалять слои образа, когда мы пытаемся удалить отдельный тег, поскольку эти слои нужны другому тегу, и в случае удаления их придется заново скачивать. Поэтому он удалит символическую ссылку на образ, т.е. сделает `Untag` образу.

Теперь образа нет в листинге:

```
docker image ls
```

Я запущу команду `df`, чтобы узнать о свободном месте на диске в килобайтах:

```
df -hk
```

Если мы запустим команду `docker image rm`, и при этом это будет последний тег для этого набора слоев, то будет произведено полное удаление файлов образа, и это фактически освободит место на диске.

```
docker image rm httpd
```

Проверю место, у нас освободилось 98504k.

```
df -hk
```

Проверю листинг образов - образа httpd больше нет в списке. Т.о. теперь место на диске реально освободилось.
