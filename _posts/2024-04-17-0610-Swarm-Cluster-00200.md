---
layout: article
---

Итак, мы хотим создать кластер из трех узлов: один swarm-менеджер и два рабочих узла.

Первое предварительное условие здесь - развернуть машины, физические или виртуальные, которые будут участниками кластера. Эти машины должны свободно общаться друг с другом по сети, т.е. должна быть обеспечена коннективити.

Второе условие - установленный Docker Engine. Как я уже говорил, современные поставки Docker содержат в себе Swarm, так что просто установи Docker. Чтобы проверить, запусти команду `docker system info` и посмотри в поле `Swarm:`. По умолчанию swarm-режим неактивен. Но когда мы инициализируем свой кластер, он перейдет в активное состояние. Именно по этому параметру можно определить, относится ли узел к кластеру.

Далее проверим сетевые настройки. Узлы в процессе работы должны иметь постоянные IP-адреса. Для менеджеров лучше сделать их статическими, поскольку в команде присоединения будет именно IP-адрес. Также для связи нам понадобятся порты, как ты видишь:

- TCP-порт 2377 необходим для управления кластером
- для связи между узлами используется порт TCP и UDP 7946.
- порт UDP 4789 требуется для реализации оверлейной сети, по ней пойдёт внутренний трафик кластера

Таким образом, если узлы находятся в разных сетях, проверь свои сетевые экраны, чтобы трафик мог беспрепятственно передаваться.
