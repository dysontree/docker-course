---
layout: article
---

Из этого следует такой вывод, что при установке пакетов, нам нужно иметь самые свежие списки репозитория. Мы можем избавить себя от такого рода проблем, добавив в начало слоя команду на обновление этих пакетов. 

И в общем-то это то же самое, что мы делаем сами в обычной жизни без контейнеров: перед тем, как сделать `apt install`, мы запускаем `apt update`. Поэтому, когда мы используем инструкции по установке пакетов в Dockerfile, то в начале должна идти команда обновления списков, и это должно быть в рамках одного слоя.

```
FROM  ubuntu

RUN  apt-get  update  \
     &&  apt-get  install  -y  python3  python3-pip  python3-dev

RUN  pip3  install  flask

COPY  app.py  /opt/app.py

ENTRYPOINT  FLASK_APP=/opt/app.py  flask  run  --host=0.0.0.0  --port=5000
```
