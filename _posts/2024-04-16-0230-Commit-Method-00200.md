---
layout: article
---

Допустим, мы создали контейнер из уже существующего образа, скажем из `httpd`. 

```
docker run -d -p 80:80 --name httpd httpd
```

Этот контейнер бежит и показывает веб-страницу по умолчанию. Давай подключимся к контейнеру и изменим текст этой дефолтной веб-страницы. 

```
docker exec httpd bash -c 'echo "Hello DevOps!" > htdocs/index.html'
```

Теперь она отображает страницу с нашим собственным текстом. 

```
curl localhost
```

Получается, мы как бы донастроили стандартный образ `httpd` до своих конечных целей. После этой операции наш контейнер будет иметь отличие от своего образа. 

Теперь это уже не образ по умолчанию, а образ плюс наш индивидуальный слой с изменениями. Изменения не очень большие, всего один файл, но это также может быть большая модификация нашего приложения в контейнере или его операционной системы. Чтобы эти изменения не пропали, мы можем их зафиксировать, т.е. `запечь` их в новом слое образа.

Поэтому, когда мы закончим вносить свои изменения, мы можем сохранить текущее состояние контейнера в отдельный образ. Мы используем команду `docker container commit`, за которым идет имя контейнера и имя нового образа. Можно использовать также вместе c опцией `-a`, как ты видишь здесь. Это принимает имя автора, которое будет занесено в метаданные образа. 

```
docker container commit -a "Rotoro" httpd rotoro-httpd:v1
```

После запуска команды `container commit` я запрошу список образов. У нас появился новый образ, и именно это наша новая модифицированная версия на базе стандартного `httpd`.

```
docker image ls
```

Далее можем отправить этот новый кастомный образ в свой приватный репозиторий, чтобы потом использовать его для развертывания своего приложения. 

Итак, еще раз. Шаги были такие:

- мы использовали существующий образ и создали от него контейнер
- затем вошли в контейнер и произвели модификацию его файлов, т.е. внесли изменения, чтобы приложение соответствовало нашим потребностям
- после запустили команду `docker container commit`, чем создали обновленный образ со всеми нашими изменениями
