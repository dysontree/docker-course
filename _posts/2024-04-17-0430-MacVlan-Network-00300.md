---
layout: article
---

Этот драйвер поддерживает два режима работы: `Bridge mode`, т.е. режим моста, и `802.1Q trunk bridge mode`, когда применяется фильтрация по стандарту 802.1Q.

В режиме моста MACVLAN-трафик проходит через физическое устройство на хосте, а в транковом режиме через сабинтерфейс, что позволяет контролировать маршрутизацию и фильтрация на более детальном уровне.

Здесь на рисунке я показал, как работают эти сабинтерфейсы Linux, они здесь с названиями `eth0.100` и `eth0.200`. Таким образом, если в нашей физической сети есть несколько VLANs, и их пакеты проходят через наш интерфейс eth0, то Linux может это отлавливать и раскладывать по разным сабинтерфейсам, откуда пакеты попадут в разные MACVLANs, а оттуда в подключенные к ним контейнеры.

Имей в виду, что при использовании этих сетей есть ограничения. Это работает только на хостах с Linux. Для правильной работы этого драйвера наши физические NICs должны работать в `promiscuous mode`, что не всегда доступно.
