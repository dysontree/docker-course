---
layout: article
---
Теперь, когда все необходимые условия выполнены, приступим к инициализации кластера. Первым шагом является инициализация узла-менеджера Docker Swarm. Для этого мы запускаем команду `swarm init`.

```
docker swarm init --advertise-addr 10.0.0.1:2377 --listen-addr 10.0.0.1:2377
```

Здесь я использовал две опции:

- `--listen-addr` - это IP-адрес, на котором этот менеджер будет ожидать обращений других менеджеров в процессе управления кластером, а также получать запросы на присоединение. По умолчанию слушает на всех интерфейсах на порту `2377`.
- `--advertise-addr` указывает, какой адрес будет сообщён, когда ты затребуешь команду на присоединение. Это или IP-адрес менеджера или адрес внешнего балансировщика, которые пересылает трафик на менеджер. Если не установлен, то попробует получить его из `listen-addr`. Если у тебя нескольких сетевых адаптеров на хосте, его нужно явно установить.

Как только кластер проинициализируется, он назначает узел, на котором была запущена эта команда в качестве менеджера. Запустим `system info`, чтобы убедиться, что режим `Swarm` активен.

Вывод команды `docker swarm init` также предоставил нам команду для присоединения новых рабочих узлов. Как видишь, у него есть адрес из `advertise-addr`. Если твои узлы в разных сетях, убедись, что они могут друг друга найти, а также, что обратный трафик может вернуться. По этой причине лучше иметь статическую IP-адресацию для набора узлов. Запустим эту команду на первом рабочем узле для присоединения к кластеру.
