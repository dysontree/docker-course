---
layout: article
---
По умолчанию Docker создает новые тома с помощью встроенного локального драйвера. Таким образом, тома, созданные с помощью драйвера `local`, предназначены для контейнеров на том же узле, где создан том. Чтобы выбрать другой драйвер, мы можем использовать флаг `-d` в команде `volume create`. Такие дополнительные драйверы представлены в виде плагинов. Они добавляют в Docker расширенные функции, связывая том с внешними СХД. 

Тут важный момент: не путай драйверы томов и драйверы хранения. Последние используются для организации `copy-on-write` механизмов в слоёной архитектуре образов, а драйвер тома - абстракция, из которой Docker получает постоянное хранилище для тома. За таким драйвером может быть обычный жесткий диск хоста, удалённое сетевое хранилище или облако.

Чтобы организовать удалённую работу тома через `ssh`, мы можем использовать плагин `vieux/sshfs`. После установки создадим удаленный том на хосте `str01`.

```
docker volume create -d vieux/sshfs -o sshcmd=test@str01:/home/test -o password=testpassword ssh_vol
```

Получив листинг томов, мы видим, что драйвера разные.

```
docker volume ls
```

Проверить детали тома можно командой `docker volume inspect`, за которой следует имя volume или её ID.

```
docker volume inspect persist_vol
```

```
docker volume inspect ssh_vol
```

В выводе мы получаем сведения о томе в формате JSON, например такие, как точку монтирования, используемый драйвер, параметры чтения и записи тома, scope и т. д.

Обрати внимание на поле `scope`. Он может быть `global` и `local`. Volumes с глобальным scope используются в режиме кластера, когда не требуется создавать подобный том на каждом docker-хосте. Поле `mountpoint` указывает где фактически расположены файлы тома на файловой системе хоста. 

Зная расположение файлов в хранилище, мы можем работать с этими файлами в обход Docker, например, устроить бэкап данных базы или изменить файлы настроек. Но часто работать удобнее, если остановить старый контейнер, а вместо него запустить другой с такими же томами, и уже из него делать техобслуживание.
