---
layout: article
---

Также обрати внимание, что для нормальной работы оверлея, для него требуется открыть некоторые порты между нодами swarm-кластера.

- порт 2377 требуется для управления кластером
- порт 7946 нужен для сети контейнеров
- порт 4789 используется для оверлейного трафика

Напоследок, пара слов о нотации при публикации портов. Обычно мы все пишем это в короткой нотации флага `-p`, разделяя порты хостов и службы двоеточием. В первой части мы указываем, какой порт мы публикуем на хостах, во второй части какой порт будет в контейнере. В данном случае порт 5000 в контейнере становится доступным по порту 80 на хостах кластера.

```
docker service create -p 80:5000 rotorocloud/webapp
```

В документации стараются писать полной нотацией: какой порт опубликован и что является целью этого опубликованного порта.

```
docker service create --publish published=80,target=5000 rotorocloud/webapp
```

Но обычно мы пишем команды так, чтобы было покороче, поэтому в реальной работе больше живёт короткая нотация, а документации длинная, поскольку считается, что её легче читать и понимать.

Ок, по умолчанию предполагается, что протокол будет TCP. Но если он отличается, мы можем указать протокол через слэш после номера порта, как ты видишь. Это можно сделать в обеих нотациях.

```
docker service create -p 80:5000/udp rotorocloud/webapp
```

```
docker service create --publish published=80,target=5000,protocol=udp rotorocloud/webapp
```

Что же, это всё. Я жду тебя в следующей лекции.
