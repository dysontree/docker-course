---
layout: article
---

Двигаемся дальше. Следующий случай - это когда нам требуется сделать привязку (маппинг) файла или директории, находящейся на хосте, к файловой системе контейнера. Иными словами `пробросить` в контейнер часть файловой системы хоста. Такое монтирование называется `bind mount` и используется в основном в разработке или для передачи настроек с хоста в небольших сетапах. В больших развертываниях оно бывает полезно для работы специализированных инструментов по безопасности или мониторингу. 

Прямое монтирование приводит к тому, что приложение `привязывается` к хосту, на котором лежат его файлы. В случае воссоздания контейнера на другом хосте, там может не быть его файлов, а также может быть другая структура каталогов, что приведёт к ошибке запуска. Также использовать связанные монтирования в продакшене является плохой идеей, т.к. ломает модель безопасности Docker. Но всё же некоторые приложения (например, очень старые программы или СУБД, транзакции которых исполняются неверно в контейнерах) не могут без этого нормально работать.

Чтобы сделать каталог `src` из текущей рабочей директории доступным по пути `/app` в контейнере используем команду:

```
docker container run --mount type=bind,source="$(pwd)"/src,destination=/app node ls -al
```

Мы использовали длинную нотацию. `type=bind` сообщает Docker, что мы хотим сделать именно маппинг директории с хоста. Исходная директория расположена в параметре `source`, как видишь она собирается из текущей директории с добавленным путём `/src`. Внутри контейнера это будет располагаться так, как мы указали в параметре `destination`, это `/app`.

Проверим детали командой `inspect`:

```
docker container inspect 164902f7d7d6
```

В короткой нотации это будет выглядеть так:

```
docker container run -v "$(pwd)"/src:/app node ls -al
```

Тут небольшое отличие этих нотаций: длинная зафейлится, если хостовой папки `/root/src` не существует. Короткая же нотация создаст её на хосте самостоятельно. Также обрати внимание, что если путь внутри контейнера уже существует, то он будет скрыт и заменён на тот, что мы привязали.
