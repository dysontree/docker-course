---
layout: article
---

`Networks` в Docker это объекты первого уровня, которые имеют собственные подкоманды. Эти абстракции скрывают от нас сложность настройки сетевого окружения и реализуют последовательный подход к выделению ресурсов и единообразие в конфигурировании.

Работая с сетями Docker, мы избавляемся от нескольких забот:
-   автоматический менеджмент IP-адресов
-   автоматическая настройка правил переадресации пакетов на опубликованные порты
-   предоставление внутреннего DNS

Все эти три пункта важны и работают совместно. Более того, в режиме `swarm` это распространяется на все узлы кластера. Все контейнеры подключаются по единым правилам и благодаря этому в Docker есть механизм `Service Discovery`.

С помощью этого механизма у приложения в контейнере получается найти нужные для работы ресурсы и другие части своего сетапа, с которыми оно взаимодействует. В классических развертываниях приложений за такие вещи обычно отвечают балансировщики. Именно они знают, какие в данный момент координаты у реплик баз данных, серверов приложений, серверов аутентификации и т.д. Обычно они настроены на получение сигналов от приложений, поэтому в курсе, когда произошло масштабирование или когда `прилёг` определённый сервер.

Docker предоставляет внутренний DNS, который помогает найти контейнер зная его название и имя сети. Также есть система healthchecks, по которым мы можем судить, здоров ли контейнер. В обычном режиме Docker не реагирует на эти пробы здоровья. Но после переключения на работу в `swarm mode` появляются действительно мощные инструменты работы с динамическими нагрузками. Мы поговорим об этом позже в курсе. 

Вкратце, у нас появляются новые типы сетей, которые работают поверх IP-адресации наших хостов, они организуют как бы внутреннюю сеть кластера внутри нашей обычной сети. Также в этом режиме Docker следит, где находится контейнер, т.е. знает точные координаты экземпляров контейнера, понимает как туда можно переправить трафик, как получить его обратно, а также знает, возможна ли вообще в данный момент отправка на этот экземпляр. Это всё вместе позволяет приложениям бесшовно обновляться, масштабироваться и т.д.

Как видишь, здесь куча взаимосвязанных процессов, и сети охватывают только часть их них. Все элементы управления, вроде Network Management, Service Discovery, Load Balancing, Sandboxes и т.д. были собраны в одной библиотеке `libnetwork`. Все эти инструменты управляют драйверами, которые и создают сети разных видов, например `bridge`, `overlay`, `macvlan`. Также мы можем задействовать драйвера сторонних разработчиков.

Итак, объект `network` в Docker спасает нас от сложности, и мы начинаем думать, что это какая-то единая технология, которая повелевает сетями. Давай уйдём немного вглубь, и посмотрим, что стоит за всем этим.
