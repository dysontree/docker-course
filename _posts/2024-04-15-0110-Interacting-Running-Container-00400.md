---
layout: article
---
```
root@3df3eff8d66c:/# ps aux
```
и сразу за ней точно такую же команду:

```
root@3df3eff8d66c:/# ps aux
```

В каждом выводе нас интересует вторые строки с PID 21 и 22 соответственно. В данный момент мы использовали `attach` и подключились к процессу с PID=1, который у нас `bash`. В нем мы вызвали ps, который сначала исполнился с ID=21, а потом ID=22. Теперь я открою второй сеанс и сделаю `exec` с командой `ps aux`.

```
docker container exec 3d ps aux
```

Как и ожидалось, ID нового процесса 23, поскольку предыдущий был 22. После выведу ps из приаттаченого терминала:

```
root@3df3eff8d66c:/# ps aux
```

Как видишь, счетчики PIDs идут не последовательно. После exec они изменились на 5 процессов, вместо 1, как это было при attach. Дело в том, что в отличие от attach, exec не подключается к главному процессу контейнера, а создает новый процесс внутри контейнера. Именно поэтому счетчик так круто изменился - поскольку вместе с ps создалось несколько вспомогательных процессов, которые потом были удалены.

Благодаря этой особенности, мы можем свободно делать exec в контейнер, запускать там процесс с оболочкой, а после свободно из него выходить. Мы не боимся, что контейнер выйдет, поскольку при выходе будет уничтожен лишь bash-процесс, который запустила команда `container exec`. Напротив, при attach, если мы не отцепляем себя от процесса #1 в контейнере, а просто пишем `exit`, то контейнер будет остановлен, как это было в примере прошлой лекции.

Надеюсь, что теперь это стало яснее. И это всё, жду тебя в следующей лекции.
