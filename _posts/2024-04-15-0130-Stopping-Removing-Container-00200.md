---
layout: article
---

Ок, давай на минутку забудем про контейнеры и сосредоточимся на базовых командах Linux.

```
nginx
```

Итак, мы запускаем приложение `nginx` на своем сервере. Выполнив такую команду, мы вернемся в свою командную строку, но этот веб-сервис будет работать, а пользователи смогут получить к нему доступ из браузера. Мы можем увидеть рабочие процессы nginx:

```
ps aux
```

Для управления этим процессом, мы можем отправлять ему разные сигналы, чтобы приостановить, возобновить или завершить его. Чтобы приостановить процесс, мы отправляем сигнал `SIGSTOP` с помощью команды `kill` с опцией `-SIGSTOP`, т.е. указываем сигнал, который мы хотим отправить, за которым следует идентификатор этого процесса. 

```
kill -SIGSTOP 4832
```

Допустим, PID процесса — 4832 . На самом деле, если мы не знаем идентификатор этого процесса, мы можем использовать команду `pgrep`, как ты видишь. 

```
pgrep -f 'nginx: master'
```

Поскольку nginx работает в виде мастер-процесса и подчиненных воркеров, то останавливать нужно именно мастера, и это мы указали в опции `-f`.

Таким образом, команда `pgrep` найдет и передаст в команду `kill` PID нужной службы. В нашем случае это nginx.

```
kill -SIGSTOP $(pgrep -f 'nginx: master')
```

```
kill -SIGCONT $(pgrep -f 'nginx: master')
```

```
kill -SIGTERM $(pgrep -f 'nginx: master')
```

Ок, мы здесь получаем выходные данные команды `pgrep` и передаем их в качестве идентификаторов процессов, которым мы хотим отправить сигнал `SIGSTOP`. Выполнение этой команды отправляет системный сигнал, информируя ОС, что процессу пришло время остановиться. Таким образом, это приостановит работу веб-сервера. Когда процесс приостановлен, его состояние сохраняется, чтобы его можно было возобновить с того места, где он остановился. Через некоторое время, когда мы отправим сигнал возобновления, процесс продолжит своё исполнение. Поэтому, чтобы возобновить этот процесс, мы отправляем сигнал продолжения с помощью той же команды kill, но название сигнала будет `SIGCONT` вместо `SIGSTOP`, как ты видишь.

После получения сигнала, ОС возобновляет работу веб-сервера, и он продолжает с того места, где остановился. Если мы хотим полностью прекратить этот процесс, стоит послать другой сигнал - это сигнал завершения. Он точно также отправляется с помощью команды kill с опцией `SIGTERM`. После того, как сигнал будет пойман процессом, у него будет время, чтобы привести свои дела в порядок и красиво завершить работу. Например, закрыть файловые дескрипторы и выполнить какие-то действия по очистке памяти перед полным своим завершением. Также процесс может полностью игнорировать этот сигнал и просто продолжать делать то, чем занимался.
