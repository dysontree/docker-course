---
layout: article
---
```
docker image ls
```

В данный момент у меня здесь библиотечная `ubuntu` и библиотечный `httpd`. Как нам сделать собственную копию такого образа? Скажем, я хочу скопировать образ `httpd` для отправки его в свой личный репозиторий во внутреннем реджистри. Тут интересный момент, что мы не можем сделать копию или переименовать образ, как мы привыкли об этом думать. Мы можем сделать ему `retag` или сменить его тег. Это похоже на механизм soft link в Linux.

Таким образом, мы можем создать символическую ссылку к образу, и система начнет узнавать под этим именем образ с выбранным нами ID. Именно поэтому одинаковые образы с разными именами занимают столько же пространства на диске, сколько занимает самый первый такой образ. Потому что теги - это дополнительные имена для первоначального образа с определенным ID.

Чтобы создать такой тег используем команду `docker image tag`, после которой идет имя или ID существующего образа и далее имя для нового.

```
docker image tag httpd httpd:v1
```

Теперь снова получим листинг образов хоста при помощи `docker image ls`. Взглянем на колонку IMAGE ID. Они одинаковые, что значит, что и образ `httpd:alpine` и `httpd:v1` являются именами, указывающими на один и тот же образ. 

```
docker image ls
```

Получается, что образ с ID, который начинается `59bc`, имеет два тега или две копии, или две ссылки. Думай об этом, как тебе удобнее. Еще обрати внимание, что размер образов одинаковый, ведь по факту это тот же образ. Вот здесь `image ls` может нас обмануть, показав, что места израсходовано очень много, хотя по факту это может быть занято всего для одного образа.

В предыдущей команде tag мы изменили тег образа, но не меняли его имя. Мы можем сделать retag, указав новый реджистри и имя образа.

```
docker image tag httpd cr.yandex/crp41679661gmc8dsf1d/httpd:v1
```

Как видишь, мы заменили имя образа полным путем на тот, что указывает на наш частный реджистри в `cr.yandex/crp41679661gmc8dsf1d`. После этого мы можем загрузить этот образ с новым именем в тот реджистри, куда указывает его полная нотация.

```
docker image  push  cr.yandex/crp41679661gmc8dsf1d/httpd:v1
```

Чтобы это прошло успешно, нам нужно быть аутентифицированным в это приватном реджистри. Теперь я зайду в консоль облака и увижу, что образ отобразился в моей приватном реестре.
